{
  "hash": "a6306d310601c916752c2586f7c1e39b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: ESS 330 Project Proposal\nauthors:\n  - name: Sean Pearson, Nick Beegle\n    affiliation: The University\n    roles: writing\n    corresponding: true\nbibliography: references.bib\nexecute:\n  echo: true\n---\n\n\n\n\n\n# Evaluating Water Quality and Flashiness Before and After Green Infrastructure Efforts in Portland, Oregon\n\n## 1.) Drafting the introduction, background, and motivation for our project \n\nAs urban areas grow, the expansion of impervious surfaces like roads, rooftops, and parking lots alters natural hydrologic processes by preventing water from soaking into the ground. Instead, stormwater rapidly runs off these surfaces into nearby streams and drainage systems. One major consequence is an increase in streamflow flashiness, which refers to how quickly streamflow rises and falls following precipitation events. Flashy stream systems are associated with higher flood risk, increased erosion, and degraded aquatic habitats (Walsh et al., 2005). This hydrologic instability poses serious ecological and management challenges for urban environments.\n\nTo address these issues, many cities have begun implementing green infrastructure like bioswales, rain gardens, and permeable pavements which aim to restore natural water infiltration and reduce stormwater runoff. Portland, Oregon, is one of the leading U.S. cities in adopting green infrastructure solutions as part of its long term environmental planning. These systems are designed to capture, slow, and filter runoff before it reaches urban waterways, potentially reducing flashiness and improving watershed health.\n\nThe goal of our project is to evaluate the effectiveness of Portland’s green infrastructure by analyzing how streamflow flashiness has changed over time in streams influenced by these interventions. We aim to assess whether green infrastructure is linked to measurable reductions in flashiness, and if so, how significant those reductions are.\n\nTo do this, we will use publicly available environmental datasets. Specifically, we will:\n\n- Obtain land cover and impervious surface data for Portland from the National Land Cover Database (NLCD). These raster datasets, available for multiple years, allow us to track urban development and identify areas likely affected by green infrastructure projects.\n\n\n- Use daily streamflow data from the U.S. Geological Survey (USGS) for urban streams in Portland. These time series allow us to calculate the Richards-Baker Index, a widely used metric for quantifying streamflow flashiness (Baker et al., 2004). We will also need historical precipitation data which we will source from USGS precipitation gages that fall within the areas green infrastructure have been built.\n\n\n- Identify areas and timelines where green infrastructure was implemented, based on city planning documents and GIS data from Portland’s Bureau of Environmental Services.\n\n\nOur methodology will include calculating RBI for selected stream gauges for years 2003 and 2023, then comparing values before and after green infrastructure was installed. We will use the statistical programming language R to manage, analyze, and visualize the data. Key tools include:\n\n- dplyr and tidyr for cleaning and organizing data\n\n\n- ggplot2 for creating visualizations\n\n\n- linear models to test for significant changes in flashiness over time\n\n\nOur motivation for this project stems from the growing need to understand and manage the environmental consequences of urbanization. Traditional stormwater systems are often designed for efficiency rather than ecology, focusing on moving water away quickly instead of supporting healthy stream dynamics. Green infrastructure represents a promising alternative, but its effectiveness must be evaluated with data. As cities continue to expand and climate change increases the frequency of extreme weather, it is critical that planners and decision-makers have evidence-based insights into what kinds of infrastructure actually support resilient, sustainable watersheds.\n\nBy assessing how stream flashiness has changed in Portland streams, our project contributes to this effort. If successful, our findings can help support further investment in green infrastructure and provide a model for other urban regions seeking to improve stormwater outcomes.\n\n#### References:\n\nBaker, David B., et al. “A New Flashiness Index: Characteristics and Applications to Midwestern Rivers and Streams.” Research Gate, Journal of the American Water Resources Association, Apr. 2004, www.researchgate.net/publication/227681885_A_New_Flashiness_Index_Characteristics_and_Applications_to_Midwestern_Rivers_and_Streams. \n\nC.J, Walsh, et al. “The Urban Stream Syndrome: Current Knowledge and the Search for a Cure.” EPA, Environmental Protection Agency, 17 Jan. 2007, cfpub.epa.gov/si/si_public_record_report.cfm?Lab=NRMRL&dirEntryId=135328. \n\n## 2.) Exploring our data\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#data retreival\n\nlibrary(dataRetrieval)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'dataRetrieval' was built under R version 4.4.3\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n# Define parameters\nsiteNumber <- \"14211720\"\nparameterCd <- \"00060\"  # Discharge, cubic feet per second\nstartDate <- \"2003-01-01\"\nendDate <- \"2023-12-31\"\n\n# Download data\nflow_data <- readNWISdv(siteNumbers = siteNumber,\n                        parameterCd = parameterCd,\n                        startDate = startDate,\n                        endDate = endDate)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nGET:https://waterservices.usgs.gov/nwis/dv/?site=14211720&format=waterml%2C1.1&ParameterCd=00060&StatCd=00003&startDT=2003-01-01&endDT=2023-12-31\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n# Clean column names\nflow_data <- renameNWISColumns(flow_data)\n\n# Save to CSV\nwrite.csv(flow_data, \"data/streamflow_14211720.csv\", row.names = FALSE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: package 'tidyverse' was built under R version 4.4.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(lubridate)\nlibrary(ggplot2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Load streamflow data\nstreamflow <- read_csv(\"data/streamflow_14211720.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 7670 Columns: 5\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (2): agency_cd, Flow_cd\ndbl  (2): site_no, Flow\ndate (1): Date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\n# Load precipitation data\nprecip <- read_csv(\"data/precip_2003_2023.csv\")\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nRows: 730 Columns: 2\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl  (1): precip_mm\ndate (1): date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nstreamflow <- streamflow %>%\n  mutate(Date = as.Date(Date))\n\nprecip <- precip %>%\n  mutate(date = as.Date(date))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Daily Streamflow for 2003\nplot_2003 <- streamflow %>%\n  filter(lubridate::year(Date) == 2003) %>%\n  ggplot(aes(x = Date, y = Flow)) +\n  geom_line(color = \"steelblue\") +\n  labs(title = \"Daily Streamflow in 2003 (USGS 14211720)\",\n       y = \"Discharge (cfs)\", x = \"Date\") +\n  theme_minimal()\n\nplot_2003\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# Daily Streamflow for 2023\nplot_2023 <- streamflow %>%\n  filter(lubridate::year(Date) == 2023) %>%\n  ggplot(aes(x = Date, y = Flow)) +\n  geom_line(color = \"darkgreen\") +\n  labs(title = \"Daily Streamflow in 2023 (USGS 14211720)\",\n       y = \"Discharge (cfs)\", x = \"Date\") +\n  theme_minimal()\n\nplot_2023\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n#precip data\nprecip_plot <- precip %>%\n  ggplot(aes(x = date, y = precip_mm)) +\n  geom_col(fill = \"skyblue4\") +\n  facet_wrap(~year(date), scales = \"free_x\", ncol = 1) +\n  labs(title = \"Daily Precipitation in 2003 and 2023\",\n       y = \"Precipitation (mm)\", x = \"Date\") +\n  theme_minimal()\n\nprecip_plot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n\n\n#### Data Exploration Summary:\n\nWe looked at daily streamflow and precipitation data from 2003 and 2023 to spot any patterns or changes over time. The streamflow data came from USGS gage 14211720, and we pulled daily precipitation records from the same area.\n\nIn 2003, streamflow peaked pretty high in the spring, over 150,000 cfs, and had several sharp spikes. In 2023, the peak flows were noticeably lower, staying under 100,000 cfs, but the seasonal pattern stayed about the same, with highs in the spring and again toward the end of the year.\n\nPrecipitation in 2003 had more intense single day storms, especially early in the year. In 2023, rainfall was more spread out, with a lot of smaller events showing up in the fall. That shift could be affecting how quickly streams respond to rain, which ties into the idea of streamflow flashiness.\n\nOverall, these trends give us a helpful baseline to explore how things like land use or green infrastructure might be changing the way water moves through the system.\n\n\n\n## 3.) Identify our preliminary methods\n\nTo understand how streamflow flashiness has changed before and after Portland implemented green infrastructure, we will use daily streamflow data from the USGS. For each stream, we’ll calculate the Richards-Baker Index each year, which measures how much streamflow fluctuates from day to day. Higher values mean the stream responds more rapidly to rain, which is typical in urban areas with a lot of runoff.\n\nWe’ll focus on streams located near green infrastructure projects like bioswales and rain gardens. For each site, we’ll compare RBI values from before the green infrastructure was built to values from after construction. This will help us see whether green infrastructure is linked to lower flashiness over time.\n\nOur analysis will be done in R using tools like dplyr for data wrangling, ggplot2 for visualizing trends, and basic linear models to test if changes in flashiness are statistically significant.\nWe also expect some challenges:\n\n- Some USGS gauges may not be located close enough to green infrastructure to detect an effect\n\n\n- Finding accurate timelines for when green infrastructure was installed may be difficult\n\n\n- Other factors like land use or rainfall changes might affect flashiness too\n\n\n- Streamflow data may have gaps or be inconsistent across sites\n\n\nEven with these challenges, our method gives us a way to evaluate if green infrastructure helps reduce urban stream flashiness, a key goal in sustainable stormwater management.\n\n## 4.) Methods\n\nTo evaluate the impact of green infrastructure on streamflow flashiness in Portland, Oregon, we focused on data from two years: 2003 (pre-GI) and 2023 (post-GI). We used daily streamflow data from the USGS site 14211720 near the junction of the Willamette and Columbia Rivers. Streamflow flashiness was measured using the Richards-Baker Index (RBI), which quantifies how rapidly water levels rise and fall in response to precipitation events.\n\nWe also obtained impervious surface data from the National Land Cover Database (NLCD) for both years to assess changes in land cover. This helped us determine whether changes in flashiness could be attributed to decreased imperviousness or to GI efforts.\n\nAll data were analyzed using R. The dataRetrieval package was used to pull streamflow and precipitation data, and dplyr, tidyr, and ggplot2 were used for data cleaning, transformation, and visualization. Linear models helped us compare flashiness across the two years. While the chosen gauge is part of a larger watershed, it still provided valuable insight into broader hydrologic patterns over time.\n\n## 5.) Results\n\nOur analysis showed a very small decrease in impervious surface in our area of interest: from 50.54107% in 2003 to 50.46942% in 2023. This minor change suggests that land cover alone likely did not drive changes in streamflow behavior. It supports the idea that Portland was already heavily developed by 2003, limiting the potential for significant reductions in impervious surfaces.\n\nRBI values for 2023 were slightly lower than those in 2003, indicating a modest reduction in streamflow flashiness. This suggests that green infrastructure had a positive effect on slowing runoff and improving hydrologic stability, despite minimal change in land cover. Our visualizations of streamflow and rainfall showed fewer sharp peaks in discharge during storm events in 2023, though some flashiness still occurred during intense precipitation.\n\n## 6.) Discussion\n\nOur analysis showed a small decrease in streamflow flashiness from 2003 to 2023, even though the percentage of impervious surfaces barely changed. This points to green infrastructure as the likely reason for the improvement. Since land cover didn’t shift much, it makes sense that features like bioswales and eco-roofs helped slow runoff and reduce flashy stream responses.\n\nThis is an encouraging finding for cities like Portland. It suggests that green infrastructure can still make a difference in managing stormwater, even in areas that are already fully developed. While the change in flashiness wasn’t huge, it shows that small scale projects, when used consistently, can have a measurable effect.\n\nThere were a few limitations in our study. The stream gauge we used covers a large watershed, so it’s hard to say how much of the change was directly caused by local green infrastructure. Other factors like changes in rainfall or upstream land use could also have played a role.\n\nFrom a data science perspective, this project shows the value of using public datasets and tools like R to analyze environmental trends. We were able to pull and process years of hydrologic data and find patterns that would otherwise be hard to see. That said, working with real-world data can be tricky, especially when trying to link cause and effect.\n\nMoving forward, it would help to use more localized gauges, get better data on exactly where and when green infrastructure was installed, and explore other metrics like runoff timing or infiltration. It’ll also be important to see how these systems hold up as weather patterns shift with climate change.\n\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}